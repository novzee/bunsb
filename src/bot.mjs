import TeleBot from 'telebot';
import schedule from 'node-schedule';

const bot = new TeleBot(process.env.TELEGRAM_BOT_TOKEN);

// ะคัะฝะบัะธั ะดะปั ะพัะฟัะฐะฒะบะธ ะดะฒัั ัะพะพะฑัะตะฝะธะน ั ะบะฝะพะฟะบะฐะผะธ ะธ ะทะฐะดะตัะถะบะพะน
bot.on('/start', (msg) => {
  const chatId = msg.chat.id;

  // ะะตัะฒะพะต ัะพะพะฑัะตะฝะธะต ั ะบะฝะพะฟะบะฐะผะธ
  bot.sendMessage(chatId, 'ะัะธะฒะตั! ๐\n\nะั ัะฐะดั, ััะพ ัั ัะตัะธะป ะฟะพะฟัะพะฑะพะฒะฐัั ะฝะฐัั ะฝะพะฒัั ะธะณัั! ะะฝะฐ ัะพะทะดะฐะฝะฐ ัะฟะตัะธะฐะปัะฝะพ ะดะปั ัะพะณะพ, ััะพะฑั ะฟะพะผะพัั ัะตะฑะต ะฝะฐััะธัััั ัะธะฝะฐะฝัะพะฒะพะน ะณัะฐะผะพัะฝะพััะธ ะฒ ัะฒะปะตะบะฐัะตะปัะฝะพะผ ัะพัะผะฐัะต ะณะพะฝะบะธ. ะงะตะผ ะฑััััะตะต ะธ ะฟัะฐะฒะธะปัะฝะตะต ัั ะฑัะดะตัั ะพัะฒะตัะฐัั ะฝะฐ ะฒะพะฟัะพัั, ัะตะผ ะฑััััะตะต ะฟะพะตะดะตั ัะฒะพะน ะฐะฒัะพะผะพะฑะธะปั!\n\nะงัะพะฑั ะฝะฐัะฐัั ะธะณัั, ะฟัะพััะพ ะฝะฐะถะผะธ ะฝะฐ ะบะฝะพะฟะบั ะฝะธะถะต. ะฃะดะฐัะธ ะธ ะฟัะธััะฝะพะณะพ ะฟััะตัะตััะฒะธั ะฒ ะผะธั ัะธะฝะฐะฝัะพะฒ! ๐๐ฐ', {
    replyMarkup: bot.keyboard([
      ['๐ ะะฐัะฐัั ะธะณัั', '๐ ะัะฐะฒะธะปะฐ ะธะณัั']
    ], { resize: true })
  });

  // ะัะพัะพะต ัะพะพะฑัะตะฝะธะต ั ะทะฐะดะตัะถะบะพะน ะฒ 30 ัะตะบัะฝะด
  setTimeout(() => {
    bot.sendMessage(chatId, '๐ *ะะะะะะะ ะะะะซ*\n\nะะปะฐะณะพะดะฐัะธะผ ัะตะฑั ะทะฐ ะฟัะพัะฒะปะตะฝะฝัะน ะธะฝัะตัะตั!\nะคะธะฝะะพะฝะบะธ - ะธะณัะฐ ะฝะฐ ะฑะฐะทะต ะฟัะธะปะพะถะตะฝะธั ะขะตะปะตะณัะฐะผ. ะงัะพะฑั ะฟัะธะฝััั ััะฐััะธะต ะฝะต ะฝัะถะฝะพ ัะบะฐัะธะฒะฐัั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฐะนะปั ะธะปะธ ะฟะตัะตัะพะดะธัั ะฝะฐ ะดััะณะธะต ัะฐะนัั - ะฒัะต ะปะตะณะบะพ ะธ ะฑััััะพ! ๐\n\nะะตะนััะฒะธะต ะธะณัั ะฝะฐัะธะฝะฐะตััั ะฒ ะณะปะฐะฒะฝะพะผ ะผะตะฝั, ะทะดะตัั ัั ะผะพะถะตัั ะฟะตัะตะนัะธ ะฒ ะพะดะธะฝ ะธะท 3 ัะฐะทะดะตะปะพะฒ:\n1. ะะฐััะฐ ๐บ\n2. ะะฐัะฐะถ ๐\n3. ะขะฐะฑะปะธัะฐ ะปะธะดะตัะพะฒ ๐\n\n๐ะะฐััะฐ โ ะบะปััะตะฒะฐั ัะพัะบะฐ, ั ะบะพัะพัะพะน ะฝะฐัะธะฝะฐะตััั ะปัะฑะพะน ะทะฐะตะทะด ะฒ ะคะธะฝะะพะฝะบะฐั! ะัะฑะธัะฐะน ัะฐะนะพะฝ ะธ ะฟะพะณััะถะฐะนัั ะฒ ะผะธั ัะธะฝะฐะฝัะพะฒะพะน ะณัะฐะผะพัะฝะพััะธ! ะะฐะปััะต ัะตะฑั ะถะดะตั ะฝะตะฑะพะปััะพะน ัะตะพัะตัะธัะตัะบะธะน ะฑะปะพะบ ั ะฟะพะปะตะทะฝะพะน ะธะฝัะพัะผะฐัะธะตะน, ัะพะปัะบะพ ะฟะพัะปะต ะฝะตะณะพ ะฝะฐัะธะฝะฐะตััั ะฝะฐััะพััะฐั ะณะพะฝะบะฐ! ะงะตะผ ะฑััััะตะต ะธ ะฟัะฐะฒะธะปัะฝะตะต ัั ะพัะฒะตัะฐะตัั ะฝะฐ ะฒะพะฟัะพัั ะฟะพ ะฟัะพะนะดะตะฝะฝะพะผั ะผะฐัะตัะธะฐะปั, ัะตะผ ะฑััััะตะต ะตะดะตั ัะฒะพะน ะฐะฒัะพะผะพะฑะธะปั! ะัะดั ะฒะฝะธะผะฐัะตะปัะฝัะผ ะธ ะฝะต ะดะฐะน ัะพะฟะตัะฝะธะบั ัะตะฑั ะพะฑะพะณะฝะฐัั! ะะฐะถะดะฐั ะฟะพะฑะตะดะฐ ะฟัะธะฝะพัะธั ะดะตะฝะตะถะฝัะน ะฟัะธะท ะธ ะพัะบะธ ัะปะฐะฒั ๐\n\n๐ะะฐัะฐะถ โ ะผะตััะพ, ะณะดะต ะฝะฐัะพะดัััั ะฒัะต ัะฒะพะธ ะฐะฒัะพะผะพะฑะธะปะธ (ะฒัะต ะบะฐะบ ะฒ ะถะธะทะฝะธ!) ะะดะตัั ัั ะผะพะถะตัั ะฒัะฑัะฐัั ะฝะพะฒัะน ััะฐะฝัะฟะพัั ะธะปะธ ะฟัะพะบะฐัะฐัั ัะถะต ะธะผะตััะธะนัั. ะะฐัะฟะพััะถะฐะนัั ัะฒะพะธะผะธ ััะตะดััะฒะฐะผะธ ั ัะผะพะผ!\n\n๐ะ ัะฐะฑะปะธัะต ะปะธะดะตัะพะฒ ัั ะผะพะถะตัั ะฟะพัะผะพััะตัั ัะฒะพะต ะผะตััะพ ะฒ ัะตะนัะธะฝะณะต, ััะฐะฒะฝะธัั ัะฒะพะธ ะดะพััะธะถะตะฝะธั ั ะดััะทััะผะธ ะธ ะฝะฐัะปะฐะดะธัััั ัะฒะพะธะผะธ ะฟะพะฑะตะดะฐะผะธ!\n\nะะพะตัะฐะปะธ? ๐๐', { parseMode: 'Markdown' });
  }, 30000);
});

// ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะพะฑัะตะฝะธะต ะบะฐะถะดัะต ะดะฒะฐ ัะฐัะฐ
schedule.scheduleJob('0 */2 * * *', () => {
  bot.sendMessage(process.env.DEFAULT_CHAT_ID, 'ะะฐะฒะฝะพ ัะตะฑั ะฝะต ะฑัะปะพ ะฒ ัะปะธัะฝัั ะณะพะฝะบะฐั! ๐๐จ');
});

// ะะฐะฟััะบ ะฑะพัะฐ
export default bot